# public/.htaccess

# Utiliser index.php comme point d'entrée
DirectoryIndex index.php

# Désactiver MultiViews pour éviter des conflits
<IfModule mod_negotiation.c>
    Options -MultiViews
</IfModule>

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /movie/

    # Si la requête ne correspond pas à un fichier ou dossier existant
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # Rediriger vers index.php (Symfony)
    RewriteRule ^ index.php [L]
</IfModule>

# -----------------------------------------------------------
# Mise en cache des assets statiques (images, CSS, JS…)
# -----------------------------------------------------------
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType application/x-javascript "access plus 1 month"
    ExpiresByType image/x-icon "access plus 1 year"
</IfModule>

# -----------------------------------------------------------
# Sécurité de base
# -----------------------------------------------------------
# Empêcher l'affichage du contenu d'un dossier
Options -Indexes

# Désactiver l'exécution de scripts dans certains répertoires
<FilesMatch "\.(htaccess|htpasswd|env|ini|log|txt)$">
    Require all denied
</FilesMatch>
